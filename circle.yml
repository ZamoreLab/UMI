machine:
  pre: 
    - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
    - sudo apt-get remove -qq cmake cmake-data
    - sudo apt-get autoremove -qq
    - sudo apt-get update -y -qq
    - sudo apt-get install -y -qq g++-6 zlib1g-dev libboost-all-dev cmake-data cmake 
    - sudo update-alternatives --install /usr/bin/g++  g++  /usr/bin/g++-6  90
    - sudo update-alternatives --install /usr/bin/gcc  gcc  /usr/bin/gcc-6  90
    - sudo update-alternatives --install /usr/bin/gcov gcov /usr/bin/gcov-6 90

checkout:
    post:
        - git submodule init
        - git submodule update

test:
    pre:
        - mkdir -p build && cd build && cmake -DCMAKE_BUILD_TYPE=DEBUG ..
    override:
        - pwd && cd build && make && make test && make install